"use strict";angular.module("app",["chart.js","luegg.directives","ui.bootstrap","ngRoute","app.config","app.components.vehicle","app.components.trip","app.components.chat","app.components.vehicle.services","app.components.trip.services"]);
"use strict";!function(){angular.module("app.config",[]).config(function(e){e.when("/vehicles",{templateUrl:"../Scripts/app/components/vehicle/vehicle.index.view.html",controller:"VehicleIndexController",controllerAs:"VehicleIndexCtrl"}).when("/vehicles/register",{templateUrl:"../Scripts/app/components/vehicle/vehicle.register.view.html",controller:"VehicleRegisterController",controllerAs:"VehicleRegisterCtrl"}).when("/vehicles/details",{templateUrl:"../Scripts/app/components/vehicle/vehicle.details.view.html",controller:"VehicleDetailsController",controllerAs:"VehicleDetailsCtrl"}).when("/vehicles/details/:id",{templateUrl:"../Scripts/app/components/vehicle/vehicle.details.view.html",controller:"VehicleDetailsController",controllerAs:"VehicleDetailsCtrl"}).when("/vehicles/delete/:id",{templateUrl:"../Scripts/app/components/vehicle/vehicle.index.view.html",controller:"VehicleDeleteController",controllerAs:"VehicleDeleteCtrl"}).when("/trips",{templateUrl:"../Scripts/app/components/trip/trip.index.view.html",controller:"TripIndexController",controllerAs:"TripIndexCtrl"}).when("/",{templateUrl:"../Scripts/app/components/trip/trip.index.view.html",controller:"TripIndexController",controllerAs:"TripIndexCtrl"}).when("/trips/register",{templateUrl:"../Scripts/app/components/trip/trip.register.view.html",controller:"TripRegisterController",controllerAs:"TripRegisterCtrl"}).when("/trips/ongoing/:id",{templateUrl:"../Scripts/app/components/trip/trip.details.view.html",controller:"TripDetailsController",controllerAs:"TripDetailsCtrl"}).when("/trips/pdfreport",{templateUrl:"../Scripts/app/components/trip/trip.pdfreport.view.html",controller:"TripPDFReportController",controllerAs:"TripPDFReportCtrl"}).when("/trips/report",{templateUrl:"../Scripts/app/components/trip/trip.report.view.html",controller:"TripReportController",controllerAs:"TripReportCtrl"}).when("/chat",{templateUrl:"../Scripts/app/components/chat/chat.index.view.html",controller:"ChatIndexController",controllerAs:"ChatIndexCtrl"}).otherwise({redirectTo:"/"})})}();
"use strict";!function(){function e(e){var n=this;n.name="Användare",n.message="",n.messages=[],n.chatHub=null,n.chatHub=$.connection.chatHub,n.chatHub.client.broadcastMessage=function(s,a){var t=s+" säger: "+a;n.messages.push(t),e.$apply()},$.connection.hub.start().done(function(){n.newMessage=function(){n.chatHub.server.sendMessage(n.name,n.message),n.message=""}})}angular.module("app.components.chat",[]).controller("ChatIndexController",e),e.$inject=["$scope"]}();
"use strict";!function(){function o(o){var t=this;t.showAll=!1,t.toggleShowAll=function(){t.showAll=!t.showAll},o.getTrips().then(function(o){console.log(o.data),t.trips=o.data}),o.getLastTrip().then(function(o){console.log(o.data),t.lastTrip=o.data}),o.getOnGoing().then(function(o){console.log(o.data),"No Trip"===o.data?(t.onGoingTrip=null,t.isTrip=!1):(t.onGoingTrip=o.data,t.isTrip=!0)})}function t(o,t,e){var n=this,r=t.location.href,i=r.substr(r.lastIndexOf("/")+1);n.showAll=!1,n.toggleShowAll=function(){n.showAll=!n.showAll},o.editOnGoing(i).then(function(o){n.details=o.data}),n.edit=function(){var e=n.trip,r=n.details;e.Id=r.Id,e.Vehicle=r.Vehicle,e.DateTime=r.DateTime,e.StartMilage=r.StartMilage,e.StartAddress=r.StartAddress,e.ArrivalAddress=r.ArrivalAddress,e.Errand=r.Errand,e.Notes=r.Notes,o.register(e).then(function(o){"success"===o.data?(console.log("Trip updated..."),t.location.href="#!/trips"):console.log("Not authorized")}).catch(function(o){console.log(o)})}}function e(o,t,e,n){var r=this;r.vehicles=function(){t.getVehicles().then(function(o){console.log(o),console.log(o.data),o.data.sort(function(o,t){return t.IsDefault-o.IsDefault});var t=o.data.filter(function(o){return 1==o.IsActive});r.vehicles=t,r.favorite=t[0]})},r.update=function(){r.favorite.Id=r.trip.Vehicle.Id},r.getLocation=function(){function o(o){console.log(o);var t=new google.maps.Geocoder,e=o.coords,i={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)};t.geocode({location:i},function(o,t){if(t==google.maps.GeocoderStatus.OK)if(o[0]){var e=o[0].formatted_address;r.trip.StartAddress=e,n.$apply(),console.log(e)}else console.log("No match!");else console.log("Error")})}navigator.geolocation?navigator.geolocation.getCurrentPosition(o,Error):console.log("No support for geolocation!")},r.register=function(){o.register(r.trip).then(function(o){"error"===o.data&&alert("Startmätarställning måste vara lägre än föregående resa."),"success"===o.data?(console.log("Trip saved..."),e.location.href="#!/trips/"):console.log("Not authorized")}).catch(function(o){console.log(o)})}}function n(o,t){var e=this;e.vehicles=function(){t.getVehicles().then(function(o){e.vehicles=o.data})},e.pdfReport=function(){o.pdfReport(e.queryObj).then(function(o){e.report=o.data}).catch(function(o){console.log(o)})}}function r(o,t,e,n){var r=this;r.vehicles=function(){t.getVehicles().then(function(o){console.log(o.data),r.vehicles=o.data})},r.chart=function(){o.report(r.queryObj).then(function(o){r.report=o.data,n.labels=["0-20 km","21-50 km","51-200 km"],n.data=[r.report.ZeroToTwenty,r.report.TwentyOneToFifty,r.report.FiftyOneToTwoHundred]}).catch(function(o){console.log(o)})}}angular.module("app.components.trip",[]).controller("TripIndexController",o).controller("TripRegisterController",e).controller("TripPDFReportController",n).controller("TripReportController",r).controller("TripDetailsController",t),o.$inject=["tripService","$window"],t.$inject=["tripService","$window","$scope"],e.$inject=["tripService","vehicleService","$window","$scope"],n.$inject=["tripService","vehicleService","$window"],r.$inject=["tripService","vehicleService","$window","$scope"]}();
"use strict";!function(){function t(t){var o="http://localhost:33355/api/trips/";this.getTrips=function(){return t({method:"GET",url:o})},this.getLastTrip=function(){return t({method:"GET",url:o+"last"})},this.getOnGoing=function(){return t({method:"GET",url:o+"ongoing"})},this.editOnGoing=function(r){return console.log(r),t({method:"GET",url:o+"ongoing/"+r})},this.register=function(r){return console.log(r),t({method:"POST",url:o+"register",data:r})},this.report=function(r){return console.log(r),t({method:"POST",url:o+"report",data:r})},this.pdfReport=function(r){return console.log(r),t({method:"POST",url:o+"pdfreport",data:r})}}angular.module("app.components.trip.services",[]).service("tripService",t),t.$inject=["$http"]}();
"use strict";!function(){function e(e){var o=this;e.getVehicles().then(function(e){console.log(e.data),o.vehicles=e.data}).catch(function(e){console.log(e)})}function o(e,o){var l=this;l.register=function(){e.register(l.vehicle).then(function(e){"success"===e.data&&(console.log("Vehicle saved..."),o.location.href="#!/vehicles")}).catch(function(e){console.log(e)})}}function l(e,o,l){var c=this,t=o.location.href,n=t.substr(t.lastIndexOf("/")+1);c.showAll=!1,c.toggleShowAll=function(){c.showAll=!c.showAll},console.log(n),e.editVehicle(n).then(function(e){c.details=e.data}),c.edit=function(){var l=c.vehicle,t=c.details;l.Id=t.Id,l.RegistrationNumber=t.RegistrationNumber,e.register(l).then(function(e){"success"===e.data?(console.log("Vehicle updated..."),console.log("#!/vehicles/details/"+t.Id),o.location.href="#!/vehicles"):console.log("Not authorized")}).catch(function(e){console.log(e)})}}function c(e,o,l){var c=o.location.href,t=c.substr(c.lastIndexOf("/")+1);console.log(t),e.removeVehicle(t).then(function(e){"success"===e.data?(console.log("Vehicle updated..."),o.location.href="#!/vehicles"):console.log("Not authorized")})}angular.module("app.components.vehicle",[]).controller("VehicleIndexController",e).controller("VehicleRegisterController",o).controller("VehicleDetailsController",l).controller("VehicleDeleteController",c),e.$inject=["vehicleService"],o.$inject=["vehicleService","$window"],l.$inject=["vehicleService","$window","$scope"],c.$inject=["vehicleService","$window","$scope"]}();
"use strict";!function(){function e(e){var t="http://localhost:33355/api/vehicles/";this.getVehicles=function(){return e({method:"GET",url:t})},this.details=function(i){return e({method:"GET",url:t+"details/"+i})},this.editVehicle=function(i){return e({method:"GET",url:t+"details/"+i})},this.removeVehicle=function(i){return e({method:"GET",url:t+"delete/"+i})},this.register=function(i){return console.log(i),e({method:"POST",url:t+"register",data:i})}}angular.module("app.components.vehicle.services",[]).service("vehicleService",e),e.$inject=["$http"]}();